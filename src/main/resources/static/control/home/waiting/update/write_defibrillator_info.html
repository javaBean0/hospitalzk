<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>除颤器质量检测原始记录</title>
    <link rel="stylesheet" type="text/css" href="../../../../static/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="../../../../static/css/admin.css"/>
    <link rel="stylesheet" href="../../../../static/css/all.min.css"/>
    <script type="text/javascript" src="../../../../static/js/jquery-3.3.1.min.js"></script>
    <script src="../../../../static/layui/layui.js" type="text/javascript" charset="utf-8"></script>
    <script src="../write_info/defibrillator.js"></script>
    <!--[if IE 8]>
    <script type="text/javascript" src="../../../../static/js/jquery-1.11.3.min.js"></script>
    <![endif]-->
    <style>
        .layui-elem-field{
            width: 100%;
        }
        .btn{
            text-align: center;
            margin-top: 70px;
            margin-bottom: 40px;
        }
        .layui-input-block{
            display: flex;
            align-items: center;
        }
        b{
            padding-left: 30px;
            width: 20%;
        }
        .is{
            color: green;
        }
        .no{
            color: red;
        }
    </style>
</head>
<body>
<div class="layui-row">
    <p style="height: 34px;width: 100%;line-height: 34px;background-color: lightyellow; text-align: center;"><span class="sign">***</span>请谨慎核对数据信息<span class="sign">***</span></p>
    <div class="col-xs-12">
        <fieldset class="layui-elem-field layui-field-title">
            <legend style="font-size: 22px;font-weight: bold;">除颤器质量检测原始记录</legend>
        </fieldset>
        <form class="layui-form layui-form-pane" action="">
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: red;">释放能量(J)允许误差 ±15%或±4J (取最大值)</legend>
            </fieldset>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">标称值 —— <span class="sign">最小能量值</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">最小能量值</label>
                <div class="layui-input-block">
                    <input type="text" id="zxnl" name="zxnl" placeholder="最小能量值" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue1" name="sfnlValue1" placeholder="测量值" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">误差</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlWc1" disabled name="sfnlWc1" placeholder="误差" autocomplete="off" class="layui-input">
                    <b id="wc1"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">标称值 —— <span class="sign">30</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue2" name="sfnlValue2" placeholder="测量值" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">误差</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlWc2" disabled name="sfnlWc2" placeholder="误差" autocomplete="off" class="layui-input">
                    <b id="wc2"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">标称值 —— <span class="sign">50</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue3" name="sfnlValue3" placeholder="测量值" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">误差</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlWc3" disabled name="sfnlWc3" placeholder="误差" autocomplete="off" class="layui-input">
                    <b id="wc3"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">标称值 —— <span class="sign">最大能量值</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">最大能量值</label>
                <div class="layui-input-block">
                    <input type="text" id="zdnl" name="zdnl" placeholder="最大能量值" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue6" name="sfnlValue6" placeholder="测量值" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">误差</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlWc6" disabled name="sfnlWc6" placeholder="误差" autocomplete="off" class="layui-input">
                    <b id="wc4"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">标称值 —— <span class="sign">100</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue4" name="sfnlValue4" placeholder="测量值" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">误差</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlWc4" name="sfnlWc4" disabled placeholder="误差" autocomplete="off" class="layui-input">
                    <b id="wc5"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">标称值 —— <span class="sign">200</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue5" name="sfnlValue5" placeholder="测量值" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">误差</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlWc5" name="sfnlWc5" disabled placeholder="误差" autocomplete="off" class="layui-input">
                    <b id="wc6"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">标称值 —— <span class="sign">20</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值(前)</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue71" name="sfnlValue71" placeholder="测量值(前)" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值(中)</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue72" name="sfnlValue72" placeholder="测量值(中)" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值(后)</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue73" name="sfnlValue73" placeholder="测量值(后)" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">误差</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlWc7" name="sfnlWc7" disabled placeholder="误差" autocomplete="off" class="layui-input">
                    <b id="wc7"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">标称值 —— <span class="sign">200</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值(前)</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue81" name="sfnlValue81" placeholder="测量值(前)" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值(中)</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue82" name="sfnlValue82" placeholder="测量值(中)" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-5 col-xs-12">
                <label class="layui-form-label">测量值(后)</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlValue83" name="sfnlValue83" placeholder="测量值(后)" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">误差</label>
                <div class="layui-input-block">
                    <input type="text" id="sfnlWc8" name="sfnlWc8" disabled placeholder="误差" autocomplete="off" class="layui-input">
                    <b id="wc8"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: red;">充电时间(s)  ≤20 s</legend>
            </fieldset>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">充电时间</label>
                <div class="layui-input-block">
                    <input type="text" id="cdsjValue" name="cdsjValue" placeholder="充电时间(s)" autocomplete="off" class="layui-input">
                    <b id="wc9"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: red;">内部放电</legend>
            </fieldset>
            <div class="layui-form-item col-md-4">
                <label class="layui-form-label">内部放电</label>
                <div class="layui-input-block" style="border: 1px solid #CCCCCC;">
                    <input type="radio" name="nbfdResult" value="1" title="符合" checked>
                    <input type="radio" name="nbfdResult" value="2" title="不符合">
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: red;">同步模式</legend>
            </fieldset>
            <div class="layui-form-item col-md-4">
                <label class="layui-form-label">同步模式</label>
                <div class="layui-input-block" style="border: 1px solid #CCCCCC;">
                    <input type="radio" name="tbmsCfresult" value="1" title="有同步触发功能" checked>
                    <input type="radio" name="tbmsCfresult" value="2" title="无同步触发功能">
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: red;">同步延迟时间 (ms) ≤60ms</legend>
            </fieldset>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">同步延迟时间</label>
                <div class="layui-input-block">
                    <input type="text" id="tbmsSj" name="tbmsSj" placeholder="同步延迟时间(ms)" autocomplete="off" class="layui-input">
                    <b id="wc10"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: red;">心率示值</legend>
            </fieldset>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">设定值 —— <span class="sign">30(28～32)</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="xlszValue1" name="xlszValue1" placeholder="测量值" autocomplete="off" class="layui-input">
                    <b id="xl1"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">设定值 —— <span class="sign">60(57～63)</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="xlszValue2" name="xlszValue2" placeholder="测量值" autocomplete="off" class="layui-input">
                    <b id="xl2"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">设定值 —— <span class="sign">100(95～105)</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="xlszValue3" name="xlszValue3" placeholder="测量值" autocomplete="off" class="layui-input">
                    <b id="xl3"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">设定值 —— <span class="sign">120(114～126)</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="xlszValue4" name="xlszValue4" placeholder="测量值" autocomplete="off" class="layui-input">
                    <b id="xl4"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #555555;">设定值 —— <span class="sign">180(171～189)</span></legend>
            </fieldset>
            <div class="layui-form-item col-md-6 col-xs-12">
                <label class="layui-form-label">测量值</label>
                <div class="layui-input-block">
                    <input type="text" id="xlszValue5" name="xlszValue5" placeholder="测量值" autocomplete="off" class="layui-input">
                    <b id="xl5"></b>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: red;">声光报警</legend>
            </fieldset>
            <div class="layui-form-item col-md-4">
                <label class="layui-form-label">声光报警</label>
                <div class="layui-input-block" style="border: 1px solid #CCCCCC;">
                    <input type="radio" name="sgbjResult" value="1" title="符合" checked>
                    <input type="radio" name="sgbjResult" value="2" title="不符合">
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: red;">报警限检查</legend>
            </fieldset>
            <div class="layui-form-item col-md-4">
                <label class="layui-form-label">报警限检查</label>
                <div class="layui-input-block" style="border: 1px solid #CCCCCC;">
                    <input type="radio" name="bjxResult" value="1" title="符合" checked>
                    <input type="radio" name="bjxResult" value="2" title="不符合">
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: red;">静音检查</legend>
            </fieldset>
            <div class="layui-form-item col-md-4">
                <label class="layui-form-label">静音检查</label>
                <div class="layui-input-block" style="border: 1px solid #CCCCCC;">
                    <input type="radio" name="jyResult" value="1" title="符合" checked>
                    <input type="radio" name="jyResult" value="2" title="不符合">
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title">
                <legend style="color: #000000;font-weight: bold;">检测人信息</legend>
            </fieldset>
            <div class="layui-form-item col-md-4">
                <label class="layui-form-label">检测人</label>
                <div class="layui-input-block">
                    <input id="isUser" type="text" disabled name="tester" required autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item col-md-4">
                <label class="layui-form-label">检测时间</label>
                <div class="layui-input-block">
                    <input id="date" type="text" name="testTime" required autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item layui-form-text col-md-6">
                <label class="layui-form-label">检测情况说明</label>
                <div class="layui-input-block">
                    <textarea id="jcsm" name="jcsm" placeholder="请输入内容" class="layui-textarea"></textarea>
                </div>
            </div>
            <div class="layui-form-item btn">
                <div class="layui-input-block">
                    <button class="layui-btn layui-btn-normal" lay-submit lay-filter="saveAll">保存</button>
                </div>
            </div>
        </form>
    </div>
</div>
<script>
    // 获取上个页面传递的类型
    var type = window.location.search;
    var ids = parseInt(type.split("=")[1]);
    // sessionStorage["thisjcyqId"]=ids;
    var thisjcyqId = parseInt(sessionStorage['thisjcyqId']);
    var thiseqId = parseInt(sessionStorage['thiseqId']);
    $(function(){
        $.ajax({
            url:"/ccy/findByCcyIds?ccyId="+ids,
            method:"GET",
            dataType:"JSON",
            success:function(res){
                console.log(res);
                if(res.data != null && res.data != ""){
                    $("#zxnl").val(res.data.zxnl);
                    $("#sfnlValue1").val(res.data.sfnlValue1);
                    $("#sfnlWc1").val(res.data.sfnlWc1);
                    $("#sfnlValue2").val(res.data.sfnlValue2);
                    $("#sfnlWc2").val(res.data.sfnlWc2);
                    $("#sfnlValue3").val(res.data.sfnlValue3);
                    $("#sfnlWc3").val(res.data.sfnlWc3);
                    $("#zdnl").val(res.data.zdnl);
                    $("#sfnlValue6").val(res.data.sfnlValue6);
                    $("#sfnlWc6").val(res.data.sfnlWc6);
                    $("#sfnlValue4").val(res.data.sfnlValue4);
                    $("#sfnlWc4").val(res.data.sfnlWc4);
                    $("#sfnlValue5").val(res.data.sfnlValue5);
                    $("#sfnlWc5").val(res.data.sfnlWc5);
                    $("#sfnlValue71").val(res.data.sfnlValue71);
                    $("#sfnlValue72").val(res.data.sfnlValue72);
                    $("#sfnlValue73").val(res.data.sfnlValue73);
                    $("#sfnlWc7").val(res.data.sfnlWc7);
                    $("#sfnlValue81").val(res.data.sfnlValue81);
                    $("#sfnlValue82").val(res.data.sfnlValue82);
                    $("#sfnlValue83").val(res.data.sfnlValue83);
                    $("#sfnlWc8").val(res.data.sfnlWc8);
                    $("#cdsjValue").val(res.data.cdsjValue);
                    $("#tbmsSj").val(res.data.tbmsSj);
                    $("#xlszValue1").val(res.data.xlszValue1);
                    $("#xlszValue2").val(res.data.xlszValue2);
                    $("#xlszValue3").val(res.data.xlszValue3);
                    $("#xlszValue4").val(res.data.xlszValue4);
                    $("#xlszValue5").val(res.data.xlszValue5);
                    // 检测人
                    $("#tester").val(res.data.tester);
                    $("#date").val(res.data.testTime);
                    $("#jcsm").val(res.data.jcsm);
                }
            }
        })
    });
     //Demo
     layui.use(['element','jquery','form','layer','laydate'], function(){
        var element = layui.element
            ,   $ = layui.jquery
            ,   form = layui.form
            ,   layer = layui.layer
            ,   laydate = layui.laydate;
        laydate.render({
            elem:"#date"
        });
        form.on('submit(saveAll)',function (data) {
            console.log(data.field);
            $.ajax({
                url:"?eqId="+thiseqId+"&jcyqId="+thisjcyqId,
                method:"POST",
                data:data.field,
                dataType:"JSON",
                success:function (res) {
                    if(res.state === 200){
                        setTimeout(function(){
                            location.href = "/control/home/waiting/wait_info/defibrillator_table.html?id="+res.data;
                        },1000);
                        layer.msg("修改成功,正在生成表格");
                    }else{
                        layer.msg("提交失败");
                    }
                },
                error:function (data) {
                    layer.msg("提交失败");
                    console.log(data);
                }
            });
            return false;
        });
    });
</script>
</body>
</html>